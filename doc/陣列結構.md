# 陣列結構

「線性串列」（Linear List）是 n 個元素的有限序列（n >= 0），將元素排成一列，除了第一個與最後一個元素，每個元素都匯錢後相鄰。

## 線性串列簡介

定義：

- 有序串列可以是空集合，或者可以寫成：a<sub>1</sub>, a<sub>2</sub>, a<sub>3</sub>..., a<sub>n-1</sub>, a<sub>n</sub>。
- 存在唯一的第一個元素 a<sub>1</sub>，與唯一的最後一個元素 a<sub>n</sub>。
- 除了 a<sub>1</sub>，每個元素都有唯一的先行者（precessor），例如 a<sub>i</sub> 的先行者是 a<sub>i-1</sub>。
- 除了 a<sub>n</sub>，每個元素都有唯一的後續者（successor），例如 a<sub>i</sub> 的後續者是 a<sub>i+1</sub>。

常見運算方式：

- 計算串列長度 n。
- 取出串列中第 i 項元素並加以修正。
- 插入一個新元素到第 i 項，並使原來的第 i 項（含）以後的元素後移一個項次。
- 刪除第 i 項的元素，並使原來的第 i 項（含）以後的元素前移一個項次。
- 由左至右或由右至左讀取串列中的元素。
- 在第 i 項存入新值，並取代舊值。
- 複製串列。
- 合併串列。

> i 值範圍：1 <= i <= n

### 儲存結構簡介

按照記憶體儲存的方式，可以分為以下兩種：

- 靜態資料結構（Static Data Structure）：或稱「密集串列」（Dense List），將有序串列的資料使用連續記憶體空間（Contiguous Allocation） 來儲存，在編譯時，就必須配置最大記憶體空間給相關變數，容易造成記憶體浪費，如陣列（Array）。
  - 優點：讀取與修改串列中任一元素的時間都固定。
  - 缺點：插入或刪除資料須移動大量資料。
- 動態資料結構（Dynamic Data Structure）：或稱「鏈結串列」（Linked List），將具有線性串列原理的資料，使用不連續的記憶體空間來儲存。
  - 優點：
    - 資料的插入或刪除很方便，不須移動大量資料。
    - 記憶體配置發生於 runtime，不須事先宣告。
  - 缺點：
    - 設計資料結構較麻煩。
    - 無法隨機讀取，必須透過循序方法找到目標資料。

## 認識陣列

「陣列」（Array）是一種緊密相鄰的可數記憶體，提供一個能夠直接存取單一資料內容的運作方式，在程式語言中通常會包含以下幾種屬性：

- 起始位址：表示陣列名稱（或陣列的第一個元素）所在記憶體中的起始位址。
- 維度（dimension）：代表此陣列維幾維陣列。
- 索引上下限：記憶體所儲存的上標與下標。
- 陣列元素個數：索引上下限的差 + 1。
- 陣列型態：決定陣列元素在記憶體所佔有的大小。

多維陣列也必須在一維的實體記憶體中表示，因為記憶體位置都是依線性順序遞增。

### 一維陣列

C# 中，一維陣列的宣告語法：

```cs
資料型別 [] 陣列名稱 = new 資料型別[元素個數];
```

- 資料型別：表示該陣列存放的資料型態，可以是 Primitive Data Type 或 Structured Data Type。
- 陣列名稱：命名規則與變數相同。
- 元素個數：表示陣列可存放的資料筆數，為一個正整數常數。

範例：[利用一維陣列尋找與儲存範圍 1 到 MAX 內的所有質數](../lib/array/Prime.cs)

### 二維陣列

C# 中，二維陣列的宣告語法：

```cs
資料型別 [,] 陣列名稱 = new 資料型別[第一維長度, 第二維長度];
```

例如宣告一個 2 列 3 行的陣列：

```cs
int [,] a = new int[2,3]
```

一維陣列的延伸，例如一個含有 m * n 個元素的二維陣列 A(1:m, 2:n)，m 為列數、n 為行數，A[4][4] 陣列在直觀平面上排列方式如下：

<table>
  <tbody>
    <tr>
      <td>A[0][0]</td>
      <td>A[0][1]</td>
      <td>A[0][2]</td>
      <td>A[0][3]</td>
    </tr>
    <tr>
      <td>A[1][0]</td>
      <td>A[1][1]</td>
      <td>A[1][2]</td>
      <td>A[1][3]</td>
    </tr>
    <tr>
      <td>A[2][0]</td>
      <td>A[2][1]</td>
      <td>A[2][2]</td>
      <td>A[2][3]</td>
    </tr>
    <tr>
      <td>A[3][0]</td>
      <td>A[3][1]</td>
      <td>A[3][2]</td>
      <td>A[3][3]</td>
    </tr>
  </tbody>
</table>

然而，電腦的記憶體中是無法以矩陣方式儲存，必須以線性方式，將其視為一維陣列的延伸來處理，通常依不同程式語言，可分為以下兩種儲存方式：

- 以列為主（Row-major）：存放順序為 a<sub>11</sub>, a<sub>12</sub>, ..., a<sub>1n</sub>, a<sub>21</sub>, a<sub>22</sub>, ..., a<sub>mn</sub>，陣列元素 a<sub>ij</sub> 與記憶體位置有下列關係：

  **Loc(a<sub>ij</sub>) = α + n * (i - 1) * d + (j - 1) * d**

- 以行為主（Column-major）：存放順序為 a<sub>11</sub>, a<sub>21</sub>, ..., a<sub>m1</sub>, a<sub>12</sub>, a<sub>22</sub>, ..., a<sub>mn</sub>，陣列元素 a<sub>ij</sub> 與記憶體位置有下列關係：

  **Loc(a<sub>ij</sub>) = α + (i - 1) * d + m * (j - 1) * d**

> 以上皆假設 α 維陣列 A 在記憶體中起始位址，d 為單位空間。